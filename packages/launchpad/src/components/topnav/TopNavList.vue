<template>
  <Popover
    class="relative bg-white"
    #="{ open }"
  >
    <PopoverButton class="flex-grow h-full group focus:outline-none focus:ring-0">
      <div
        class="flex items-center gap-8px text-gray-600 group-hocus:text-indigo-600"
        :class="open ? 'text-indigo-600' : ''"
      >
        <slot
          name="heading"
          :open="open"
        />
        <i-cy-chevron-down
          class="w-10px transform group-hocus:icon-dark-indigo-500 transition-all duration-300"
          :class="open ? 'rotate-180 icon-dark-indigo-500' : 'icon-dark-gray-200'"
        />
      </div>
    </PopoverButton>
    <TransitionQuickFade>
      <PopoverPanel class="absolute right-0 z-10 bg-white rounded shadow top-36px">
        <ul
          v-if="variant !== 'panel'"
          class="flex flex-col"
        >
          <slot />
        </ul>
        <slot v-else />
      </PopoverPanel>
    </TransitionQuickFade>
  </Popover>
</template>

<script setup lang="ts">
import { Popover, PopoverButton, PopoverPanel } from '@headlessui/vue'
import TransitionQuickFade from '@cy/components/transitions/TransitionQuickFade.vue'

defineProps<{
  variant?: String,
}>()

</script>
