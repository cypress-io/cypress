export type CypressErrorLike = Error & {
  isCypressErr: boolean
  type: string
  code: string
  details?: string
  errno?: any
}

export type CypressError = Error & {
  type: CypressErrorIdentifier
  isCypressErr: boolean
  code: string
  details?: string
  errno?: any
}

export function isCypressError (e: CypressError | CypressErrorLike): e is CypressError {
  return Boolean(e.isCypressErr)
}

export type CypressErrorIdentifier = typeof ALL_CYPRESS_ERROR_TYPES[number]

export const ALL_CYPRESS_ERROR_TYPES = [
  'CANNOT_TRASH_ASSETS',
  'CANNOT_REMOVE_OLD_BROWSER_PROFILES',
  'VIDEO_RECORDING_FAILED',
  'VIDEO_POST_PROCESSING_FAILED',
  'CHROME_WEB_SECURITY_NOT_SUPPORTED',
  'BROWSER_NOT_FOUND_BY_NAME',
  'BROWSER_NOT_FOUND_BY_PATH',
  'NOT_LOGGED_IN',
  'TESTS_DID_NOT_START_RETRYING',
  'TESTS_DID_NOT_START_FAILED',
  'TESTING_TYPE_NEEDED_FOR_RUN',
  'DASHBOARD_CANCEL_SKIPPED_SPEC',
  'DASHBOARD_API_RESPONSE_FAILED_RETRYING',
  'DASHBOARD_CANNOT_PROCEED_IN_PARALLEL',
  'DASHBOARD_CANNOT_PROCEED_IN_SERIAL',
  'DASHBOARD_UNKNOWN_INVALID_REQUEST',
  'DASHBOARD_UNKNOWN_CREATE_RUN_WARNING',
  'DASHBOARD_STALE_RUN',
  'DASHBOARD_ALREADY_COMPLETE',
  'DASHBOARD_PARALLEL_REQUIRED',
  'DASHBOARD_PARALLEL_DISALLOWED',
  'DASHBOARD_PARALLEL_GROUP_PARAMS_MISMATCH',
  'DASHBOARD_RUN_GROUP_NAME_NOT_UNIQUE',
  'INDETERMINATE_CI_BUILD_ID',
  'RECORD_PARAMS_WITHOUT_RECORDING',
  'INCORRECT_CI_BUILD_ID_USAGE',
  'RECORD_KEY_MISSING',
  'CANNOT_RECORD_NO_PROJECT_ID',
  'PROJECT_ID_AND_KEY_BUT_MISSING_RECORD_OPTION',
  'DASHBOARD_INVALID_RUN_REQUEST',
  'RECORDING_FROM_FORK_PR',
  'DASHBOARD_CANNOT_UPLOAD_RESULTS',
  'DASHBOARD_CANNOT_CREATE_RUN_OR_INSTANCE',
  'DASHBOARD_RECORD_KEY_NOT_VALID',
  'DASHBOARD_PROJECT_NOT_FOUND',
  'NO_PROJECT_ID',
  'NO_PROJECT_FOUND_AT_PROJECT_ROOT',
  'CANNOT_FETCH_PROJECT_TOKEN',
  'CANNOT_CREATE_PROJECT_TOKEN',
  'PORT_IN_USE_SHORT',
  'PORT_IN_USE_LONG',
  'ERROR_READING_FILE',
  'ERROR_WRITING_FILE',
  'NO_SPECS_FOUND',
  'RENDERER_CRASHED',
  'AUTOMATION_SERVER_DISCONNECTED',
  'SUPPORT_FILE_NOT_FOUND',
  'SETUP_NODE_EVENTS_IS_NOT_FUNCTION',
  'SETUP_NODE_EVENTS_DO_NOT_SUPPORT_DEV_SERVER',
  'PLUGINS_FUNCTION_ERROR',
  'SETUP_NODE_EVENTS_UNEXPECTED_ERROR',
  'PLUGINS_VALIDATION_ERROR',
  'BUNDLE_ERROR',
  'SETTINGS_VALIDATION_ERROR',
  'PLUGINS_CONFIG_VALIDATION_ERROR',
  'CONFIG_VALIDATION_ERROR',
  'RENAMED_CONFIG_OPTION',
  'CANNOT_CONNECT_BASE_URL',
  'CANNOT_CONNECT_BASE_URL_WARNING',
  'CANNOT_CONNECT_BASE_URL_RETRYING',
  'INVALID_REPORTER_NAME',
  'NO_DEFAULT_CONFIG_FILE_FOUND',
  'CONFIG_FILE_MIGRATION_NEEDED',
  'LEGACY_CONFIG_FILE',
  'CONFIG_FILES_LANGUAGE_CONFLICT',
  'CONFIG_FILE_NOT_FOUND',
  'INVOKED_BINARY_OUTSIDE_NPM_MODULE',
  'DUPLICATE_TASK_KEY',
  'FREE_PLAN_EXCEEDS_MONTHLY_PRIVATE_TESTS',
  'FREE_PLAN_IN_GRACE_PERIOD_EXCEEDS_MONTHLY_PRIVATE_TESTS',
  'PAID_PLAN_EXCEEDS_MONTHLY_PRIVATE_TESTS',
  'FREE_PLAN_EXCEEDS_MONTHLY_TESTS',
  'FREE_PLAN_IN_GRACE_PERIOD_EXCEEDS_MONTHLY_TESTS',
  'PLAN_EXCEEDS_MONTHLY_TESTS',
  'FREE_PLAN_IN_GRACE_PERIOD_PARALLEL_FEATURE',
  'PARALLEL_FEATURE_NOT_AVAILABLE_IN_PLAN',
  'PLAN_IN_GRACE_PERIOD_RUN_GROUPING_FEATURE_USED',
  'RUN_GROUPING_FEATURE_NOT_AVAILABLE_IN_PLAN',
  'FIXTURE_NOT_FOUND',
  'AUTH_COULD_NOT_LAUNCH_BROWSER',
  'AUTH_BROWSER_LAUNCHED',
  'BAD_POLICY_WARNING',
  'BAD_POLICY_WARNING_TOOLTIP',
  'EXTENSION_NOT_LOADED',
  'COULD_NOT_FIND_SYSTEM_NODE',
  'INVALID_CYPRESS_INTERNAL_ENV',
  'CDP_VERSION_TOO_OLD',
  'CDP_COULD_NOT_CONNECT',
  'FIREFOX_COULD_NOT_CONNECT',
  'CDP_COULD_NOT_RECONNECT',
  'CDP_RETRYING_CONNECTION',
  'DEPRECATED_BEFORE_BROWSER_LAUNCH_ARGS',
  'UNEXPECTED_BEFORE_BROWSER_LAUNCH_PROPERTIES',
  'COULD_NOT_PARSE_ARGUMENTS',
  'FIREFOX_MARIONETTE_FAILURE',
  'FOLDER_NOT_WRITABLE',
  'EXPERIMENTAL_SAMESITE_REMOVED',
  'EXPERIMENTAL_COMPONENT_TESTING_REMOVED',
  'EXPERIMENTAL_SHADOW_DOM_REMOVED',
  'EXPERIMENTAL_NETWORK_STUBBING_REMOVED',
  'EXPERIMENTAL_RUN_EVENTS_REMOVED',
  'FIREFOX_GC_INTERVAL_REMOVED',
  'INCOMPATIBLE_PLUGIN_RETRIES',
  'INVALID_CONFIG_OPTION',
  'PLUGINS_RUN_EVENT_ERROR',
  'CT_NO_DEV_START_EVENT',
  'UNSUPPORTED_BROWSER_VERSION',
  'WIN32_UNSUPPORTED',
  'NODE_VERSION_DEPRECATION_SYSTEM',
  'NODE_VERSION_DEPRECATION_BUNDLED',
] as const
